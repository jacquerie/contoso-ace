(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(43)},32:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(21),c=a.n(r),l=a(9),i=a(10),s=a(12),u=a(11),m=a(13),h=a(7),p=a(60),d=a(61),f=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.match;return o.a.createElement("div",{className:"Chat"},o.a.createElement("h2",null,"Chat #",e.params.id))}}]),t}(o.a.Component),E=a(0),b=a.n(E),y=a(44),v=a(45),j=a(46),O=a(47),k=a(48),g=a(49),C=a(50),w=a(51),x=(a(32),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={chats:[]},a.handleClick=a.handleClick.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchChats()}},{key:"fetchChats",value:function(){var e=this;fetch("/api/chats",{method:"GET",credentials:"same-origin"}).then(function(e){return e.ok?e.json():[]}).then(function(t){return e.setState({chats:t})})}},{key:"toRows",value:function(e){for(var t=[],a=0;a<e.length;a+=3){for(var n=[],r=a;r<e.length&&r<a+3;r++)n.push(this.toCol(e[r]));t.push(o.a.createElement(y.a,null,n))}return o.a.createElement("div",{className:"Rows"},t)}},{key:"toCol",value:function(e){var t=this;return o.a.createElement(v.a,{xs:"4"},o.a.createElement(j.a,null,o.a.createElement(O.a,null,o.a.createElement(k.a,{tag:"h2"},e.customer.full_name),o.a.createElement(g.a,null,e.message.text),o.a.createElement(C.a,{onClick:function(){return t.handleClick(e.message._id)},color:"success"},"Accept"))))}},{key:"handleClick",value:function(e){var t=this;fetch("/api/chats/".concat(e,"/employees"),{method:"POST",credentials:"same-origin"}).then(function(a){a.ok&&t.context.router.history.push("/chats/".concat(e))})}},{key:"render",value:function(){return o.a.createElement("div",{className:"Dashboard"},o.a.createElement(w.a,null,this.toRows(this.state.chats)))}}]),t}(o.a.Component));x.contextTypes={router:b.a.object.isRequired};var S=x,N=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.match;return o.a.createElement("div",{className:"Chats"},o.a.createElement(d.a,{path:e.path,exact:!0,component:S}),o.a.createElement(d.a,{path:"".concat(e.path,"/:id"),component:f}))}}]),t}(o.a.Component),P=a(52),T=a(53),R=a(54),D=a(55),q=(a(35),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleClick",value:function(e){var t=this;e.preventDefault(),this.props.logoutEmployee().then(function(){return t.context.router.history.push("/")})}},{key:"render",value:function(){return o.a.createElement("div",{className:"Header"},o.a.createElement(P.a,{dark:!0,color:"primary",expand:"xs"},o.a.createElement(w.a,null,o.a.createElement("h1",{className:"navbar-text"},"Contoso ACE"),null!==this.props.employee&&o.a.createElement(T.a,{navbar:!0},o.a.createElement(R.a,{className:"navbar-text mr-3"},"Hello, ",this.props.employee.first_name,"!"),o.a.createElement(R.a,null,o.a.createElement(D.a,{onClick:this.handleClick},"Sign Out"))))))}}]),t}(o.a.Component));q.contextTypes={router:b.a.object.isRequired};var A=q,J=a(56),_=a(57),B=a(58),G=a(59),H=(a(37),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=new FormData(e.target);this.props.loginEmployee(a.get("Email"),a.get("Password")).then(function(){return t.context.router.history.push("/chats")})}},{key:"render",value:function(){return o.a.createElement("div",{className:"Login"},o.a.createElement(w.a,null,o.a.createElement(y.a,null,o.a.createElement(v.a,{xs:{offset:3,size:6}},o.a.createElement(j.a,null,o.a.createElement(O.a,null,o.a.createElement(J.a,{onSubmit:this.handleSubmit},o.a.createElement(_.a,null,o.a.createElement(B.a,{for:"Email"},"Email"),o.a.createElement(G.a,{type:"email",name:"Email",id:"Email",placeholder:"barbara@contoso.com"})),o.a.createElement(_.a,null,o.a.createElement(B.a,{for:"Password"},"Password"),o.a.createElement(G.a,{type:"password",name:"Password",id:"Password"})),o.a.createElement(C.a,{type:"submit",color:"primary"},"Sign In"))))))))}}]),t}(o.a.Component));H.contextTypes={router:b.a.object.isRequired};var I=H,M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={employee:null},a.loginEmployee=a.loginEmployee.bind(Object(h.a)(Object(h.a)(a))),a.logoutEmployee=a.logoutEmployee.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchEmployee()}},{key:"fetchEmployee",value:function(){var e=this;return fetch("/api/employees/current",{method:"GET",credentials:"same-origin"}).then(function(e){return e.ok?e.json():null}).then(function(t){return e.setState({employee:t})})}},{key:"loginEmployee",value:function(e,t){var a=this;return fetch("/api/employees/login",{method:"POST",credentials:"same-origin",body:JSON.stringify({email:e,password:t})}).then(function(e){e.ok&&a.fetchEmployee()})}},{key:"logoutEmployee",value:function(){var e=this;return fetch("/api/employees/logout",{method:"POST",credentials:"same-origin"}).then(function(t){return t.ok?null:e.state.employee}).then(function(t){return e.setState({employee:t})})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement(p.a,null,o.a.createElement("div",{className:"Router"},o.a.createElement(A,{employee:this.state.employee,logoutEmployee:this.logoutEmployee}),o.a.createElement(d.a,{path:"/",exact:!0,render:function(t){return o.a.createElement(I,Object.assign({},t,{loginEmployee:e.loginEmployee}))}}),o.a.createElement(d.a,{path:"/chats",component:N}))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(39),a(41);c.a.render(o.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.889f3bab.chunk.js.map